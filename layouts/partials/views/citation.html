{{ $item := .item }}
{{ $year_value := $item.Params.event_start | default $item.Date }}
{{ $year := (time $year_value).Format "2006" }}
{{ $has_attachments := partial "functions/has_attachments" $item }}

<div class="pub-list-item view-citation" style="margin-bottom: 1rem">

  {{/* APA Style */}}
  {{ if eq (site.Params.hugoblox.content.citations.style | default "apa") "apa" }}

  <span class="article-metadata li-cite-author">
    {{ partial "page_metadata_authors" $item }}
  </span>
  <span class="pub-year">(<span class="pub-year-value">{{- $year -}}</span>)</span>.
  <a href="{{ $item.RelPermalink }}" class="pub-title">{{ $item.Title }}</a>.
  {{ if $item.Params.publication_short }}
    <span class="pub-venue">{{- $item.Params.publication_short | markdownify -}}</span>.
  {{ else if $item.Params.publication }}
    <span class="pub-venue">{{- $item.Params.publication | markdownify -}}</span>.
  {{ end }}

  {{ if $has_attachments }}
  <div class="pub-links">
    {{ partial "page_links" (dict "page" $item "is_list" 1) }}
  </div>
  {{ end }}

  {{/* MLA Style */}}
  {{ else }}

  <span class="article-metadata li-cite-author">
    {{ partial "page_metadata_authors" $item }}.
  </span>
  <a href="{{ $item.RelPermalink }}" class="pub-title">{{ $item.Title }}</a>.
  {{ if $item.Params.publication_short }}
    <span class="pub-venue">{{- $item.Params.publication_short | markdownify -}}</span>,
  {{ else if $item.Params.publication }}
    <span class="pub-venue">{{- $item.Params.publication | markdownify -}}</span>,
  {{ end }}
  <span class="pub-year"><span class="pub-year-value">{{- $year -}}</span></span>.

  {{ if $has_attachments }}
  <div class="pub-links">
    {{ partial "page_links" (dict "page" $item "is_list" 1) }}
  </div>
  {{ end }}

  {{ end }}
</div>
